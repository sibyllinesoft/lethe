import{c as v,a,j as e}from"./createLucideIcon-a1714018.js";import{r as p,R as A}from"./index-8b3efc3f.js";import{b as $,H as y,d as c,B as j,T as s,e as D,f as N,g as I,p as m}from"./charts-bbe52c79.js";import{C as L,a as M}from"./clock-76184412.js";import{A as x}from"./alert-circle-7b73ffd7.js";import{f as B}from"./mockData-38ebf9b0.js";const V=v("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),H=v("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),_=({data:g,className:w})=>{const[i,b]=p.useState({key:"execution_count",direction:"desc"}),[h,k]=p.useState({}),[C,z]=p.useState(!1),t=A.useMemo(()=>{const r=[...g].sort((l,q)=>{const d=l[i.key],u=q[i.key];return typeof d=="string"?i.direction==="asc"?d.localeCompare(u):u.localeCompare(d):i.direction==="asc"?d-u:u-d});return h.search?r.filter(l=>l.prompt_id.toLowerCase().includes(h.search.toLowerCase())):r},[g,i,h.search]),o=r=>{b(l=>({key:r,direction:l.key===r&&l.direction==="asc"?"desc":"asc"}))},n=({column:r})=>i.key!==r?e(N,{className:"h-4 w-4",style:{color:c.colors.graphite[300]}}):i.direction==="asc"?e(N,{className:"h-4 w-4",style:{color:c.colors.data.primary[0]}}):e(I,{className:"h-4 w-4",style:{color:c.colors.data.primary[0]}}),f=r=>r<1e3?`${Math.round(r)}ms`:`${(r/1e3).toFixed(1)}s`,P=r=>B(new Date(r),"MMM dd, HH:mm"),S=r=>r>=95?"success":r>=90?"warning":"error",T=r=>r<500?c.colors.success[600]:r<1e3?c.colors.warning[600]:c.colors.error[600],F=r=>r>=.9?m.excellent:r>=.8?m.good:r>=.7?m.fair:r>=.6?m.poor:m.critical;return a($,{className:w,children:[a("div",{className:"p-6 border-b border-graphite-200",children:[a("div",{className:"flex items-center justify-between",children:[e(y,{level:3,className:"text-graphite-900",children:"Prompt Performance Analytics"}),a("div",{className:"flex items-center gap-4",children:[a("div",{className:"relative",children:[e(H,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2",style:{color:c.colors.graphite[400]}}),e("input",{type:"text",placeholder:"Search prompts...",value:h.search||"",onChange:r=>k(l=>({...l,search:r.target.value})),className:"pl-10 pr-4 py-2 rounded-md transition-all duration-200 focus-ring",style:{border:`1px solid ${c.colors.graphite[300]}`,backgroundColor:c.colors.surface.primary,color:c.colors.graphite[900]}})]}),a(j,{variant:"outline",size:"sm",onClick:()=>z(!C),children:[e(V,{className:"h-4 w-4 mr-2"}),"Filters"]})]})]}),a("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[a("div",{className:"flex items-center gap-3",children:[e(L,{className:"h-5 w-5 flex-shrink-0",style:{color:c.colors.success[500]}}),a("div",{children:[a(s,{weight:"semibold",color:"primary",className:"leading-none",children:[t.length," Prompts"]}),e(s,{size:"xs",color:"tertiary",className:"mt-1",children:"Total tracked"})]})]}),a("div",{className:"flex items-center gap-3",children:[e(M,{className:"h-5 w-5 flex-shrink-0",style:{color:c.colors.data.primary[0]}}),a("div",{children:[e(s,{weight:"semibold",color:"primary",className:"leading-none",children:f(t.reduce((r,l)=>r+l.avg_execution_time,0)/t.length)}),e(s,{size:"xs",color:"tertiary",className:"mt-1",children:"Avg execution time"})]})]}),a("div",{className:"flex items-center gap-3",children:[e(x,{className:"h-5 w-5 flex-shrink-0",style:{color:c.colors.warning[500]}}),a("div",{children:[a(s,{weight:"semibold",color:"primary",className:"leading-none",children:[(t.reduce((r,l)=>r+l.success_rate,0)/t.length).toFixed(1),"%"]}),e(s,{size:"xs",color:"tertiary",className:"mt-1",children:"Avg success rate"})]})]}),a("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-5 h-5 rounded flex-shrink-0",style:{background:`linear-gradient(45deg, ${c.colors.data.primary[0]}, ${c.colors.data.primary[4]})`}}),a("div",{children:[e(s,{weight:"semibold",color:"primary",className:"leading-none",children:t.reduce((r,l)=>r+l.execution_count,0).toLocaleString()}),e(s,{size:"xs",color:"tertiary",className:"mt-1",children:"Total executions"})]})]})]})]}),e("div",{className:"overflow-x-auto",children:a("table",{className:"w-full",children:[e("thead",{style:{backgroundColor:c.colors.graphite[50]},children:a("tr",{children:[e("th",{className:"table-header",onClick:()=>o("prompt_id"),children:a("div",{className:"flex items-center gap-1",children:[e(s,{size:"xs",weight:"medium",color:"secondary",className:"uppercase tracking-wider",children:"Prompt ID"}),e(n,{column:"prompt_id"})]})}),e("th",{className:"table-header",onClick:()=>o("execution_count"),children:a("div",{className:"flex items-center gap-1",children:[e(s,{size:"xs",weight:"medium",color:"secondary",className:"uppercase tracking-wider",children:"Executions"}),e(n,{column:"execution_count"})]})}),e("th",{className:"table-header",onClick:()=>o("avg_execution_time"),children:a("div",{className:"flex items-center gap-1",children:[e(s,{size:"xs",weight:"medium",color:"secondary",className:"uppercase tracking-wider",children:"Avg Time"}),e(n,{column:"avg_execution_time"})]})}),e("th",{className:"table-header",onClick:()=>o("success_rate"),children:a("div",{className:"flex items-center gap-1",children:[e(s,{size:"xs",weight:"medium",color:"secondary",className:"uppercase tracking-wider",children:"Success Rate"}),e(n,{column:"success_rate"})]})}),e("th",{className:"table-header",onClick:()=>o("avg_quality_score"),children:a("div",{className:"flex items-center gap-1",children:[e(s,{size:"xs",weight:"medium",color:"secondary",className:"uppercase tracking-wider",children:"Quality"}),e(n,{column:"avg_quality_score"})]})}),e("th",{className:"table-header",onClick:()=>o("error_count"),children:a("div",{className:"flex items-center gap-1",children:[e(s,{size:"xs",weight:"medium",color:"secondary",className:"uppercase tracking-wider",children:"Errors"}),e(n,{column:"error_count"})]})}),e("th",{className:"table-header",onClick:()=>o("last_used"),children:a("div",{className:"flex items-center gap-1",children:[e(s,{size:"xs",weight:"medium",color:"secondary",className:"uppercase tracking-wider",children:"Last Used"}),e(n,{column:"last_used"})]})})]})}),e("tbody",{style:{backgroundColor:c.colors.surface.primary,borderTop:`1px solid ${c.colors.graphite[200]}`},children:t.map(r=>a("tr",{className:"transition-colors duration-200 border-b border-graphite-100 hover:bg-graphite-25",children:[e("td",{className:"table-cell",children:a("div",{children:[e(s,{weight:"medium",color:"primary",className:"leading-none",children:r.prompt_id}),a(s,{size:"sm",color:"tertiary",className:"mt-1",children:[Math.round(r.avg_response_length)," chars avg"]})]})}),e("td",{className:"table-cell",children:e(s,{weight:"medium",color:"primary",children:r.execution_count.toLocaleString()})}),e("td",{className:"table-cell",children:e(s,{weight:"medium",style:{color:T(r.avg_execution_time)},children:f(r.avg_execution_time)})}),e("td",{className:"table-cell",children:a(D,{variant:S(r.success_rate),size:"sm",children:[r.success_rate.toFixed(1),"%"]})}),e("td",{className:"table-cell",children:r.avg_quality_score?a("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-16 h-2 rounded-full overflow-hidden",style:{backgroundColor:c.colors.graphite[200]},children:e("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${r.avg_quality_score*100}%`,backgroundColor:F(r.avg_quality_score)}})}),e(s,{size:"xs",color:"secondary",children:r.avg_quality_score.toFixed(3)})]}):e(s,{size:"sm",color:"tertiary",children:"N/A"})}),e("td",{className:"table-cell",children:e(s,{weight:"medium",style:{color:r.error_count>0?c.colors.error[600]:c.colors.graphite[500]},children:r.error_count})}),e("td",{className:"table-cell",children:e(s,{size:"sm",color:"secondary",children:P(r.last_used)})})]},r.prompt_id))})]})}),t.length===0&&a("div",{className:"text-center py-12",children:[e(x,{className:"mx-auto h-12 w-12",style:{color:c.colors.graphite[400]}}),e(y,{level:4,className:"mt-4 text-graphite-900",children:"No prompts found"}),e(s,{color:"secondary",className:"mt-2",children:"Try adjusting your search criteria."})]})]})};try{_.displayName="PromptPerformanceTable",_.__docgenInfo={description:`Interactive table showing prompt performance data
Based on PromptDashboard.get_prompt_performance() output
Includes sorting, filtering, and search functionality`,displayName:"PromptPerformanceTable",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"PromptPerformance[]"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}}}}}catch{}export{_ as P};
