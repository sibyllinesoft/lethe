import{c as t,a as r,j as e}from"./createLucideIcon-a1714018.js";import{r as P}from"./index-8b3efc3f.js";import{b,d as s,H as p,e as w,M as h,T as a,h as u,p as n,g as $}from"./charts-bbe52c79.js";import{a as k,C as I}from"./clock-76184412.js";import{Z as j}from"./zap-8b467b4b.js";import{f as B}from"./mockData-38ebf9b0.js";import{A as C}from"./alert-circle-7b73ffd7.js";import{C as R}from"./chevron-right-a7178483.js";const F=t("GitCommitHorizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]),z=t("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),S=t("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),L=t("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),U=t("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),A=t("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),O=t("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),T=({comparison:c,className:E})=>{var f,_;const[g,q]=P.useState({prompt:!1,response:!1,parameters:!1,environment:!1}),l=c.current_execution,D=o=>{q(i=>({...i,[o]:!i[o]}))},x=o=>o<1e3?`${Math.round(o)}ms`:`${(o/1e3).toFixed(1)}s`,N=o=>B(new Date(o),"PPp"),M=o=>o?"error":"success",V=o=>o?e(C,{className:"h-5 w-5",style:{color:s.colors.error[500]}}):e(I,{className:"h-5 w-5",style:{color:s.colors.success[500]}}),H=o=>o.includes("improved")||o.includes("increased")?e(A,{className:"h-4 w-4",style:{color:s.colors.success[500]}}):o.includes("decreased")||o.includes("slower")?e(U,{className:"h-4 w-4",style:{color:s.colors.error[500]}}):e(C,{className:"h-4 w-4",style:{color:s.colors.data.primary[0]}}),v=o=>o>=.9?n.excellent:o>=.8?n.good:o>=.7?n.fair:o>=.6?n.poor:n.critical,d=({title:o,section:i,children:m})=>r(b,{className:"overflow-hidden",children:[r("button",{onClick:()=>D(i),className:"w-full px-4 py-3 flex items-center justify-between transition-colors duration-200 rounded-t-lg",style:{backgroundColor:s.colors.graphite[50]},onMouseOver:y=>{y.currentTarget.style.backgroundColor=s.colors.graphite[100]},onMouseOut:y=>{y.currentTarget.style.backgroundColor=s.colors.graphite[50]},children:[e(a,{weight:"medium",color:"primary",children:o}),g[i]?e($,{className:"h-4 w-4",style:{color:s.colors.graphite[500]}}):e(R,{className:"h-4 w-4",style:{color:s.colors.graphite[500]}})]}),g[i]&&e("div",{className:"p-4",style:{borderTop:`1px solid ${s.colors.graphite[200]}`},children:m})]});return r(b,{className:E,children:[r("div",{className:"p-6",style:{borderBottom:`1px solid ${s.colors.graphite[200]}`},children:[r("div",{className:"flex items-center justify-between mb-6",children:[e(p,{level:2,className:"text-graphite-900",children:"Execution Details"}),r(w,{variant:M(l.error_occurred),className:"flex items-center gap-2",children:[V(l.error_occurred),e("span",{children:l.error_occurred?"Failed":"Successful"})]})]}),r("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e(h,{title:"Execution ID",value:l.execution_id.substring(0,12)+"...",subtitle:"Unique identifier",icon:e(z,{className:"h-8 w-8"}),iconColor:s.colors.data.primary[0],backgroundColor:s.colors.data.primary[0]+"10"}),e(h,{title:"Execution Time",value:x(l.execution_time_ms),subtitle:"Processing duration",icon:e(k,{className:"h-8 w-8"}),iconColor:s.colors.data.primary[1],backgroundColor:s.colors.data.primary[1]+"10"}),e(h,{title:"Response Length",value:`${l.response_length.toLocaleString()}`,subtitle:"Characters generated",icon:e(S,{className:"h-8 w-8"}),iconColor:s.colors.success[600],backgroundColor:s.colors.success[50]}),e(h,{title:"Quality Score",value:((f=l.response_quality_score)==null?void 0:f.toFixed(3))||"N/A",subtitle:"Response quality",icon:e(j,{className:"h-8 w-8"}),iconColor:l.response_quality_score?v(l.response_quality_score):s.colors.graphite[400],backgroundColor:l.response_quality_score?v(l.response_quality_score)+"10":s.colors.graphite[50]})]})]}),r("div",{className:"p-6",style:{borderBottom:`1px solid ${s.colors.graphite[200]}`},children:[e(p,{level:3,className:"text-graphite-900 mb-4",children:"Execution Metadata"}),r("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r("div",{className:"space-y-3",children:[r("div",{className:"flex items-center gap-2",children:[e(O,{className:"h-4 w-4 flex-shrink-0",style:{color:s.colors.graphite[400]}}),e(a,{size:"sm",color:"secondary",children:"Prompt ID:"}),e(a,{size:"sm",weight:"medium",color:"primary",children:l.prompt_id})]}),r("div",{className:"flex items-center gap-2",children:[e(L,{className:"h-4 w-4 flex-shrink-0",style:{color:s.colors.graphite[400]}}),e(a,{size:"sm",color:"secondary",children:"Model:"}),e(a,{size:"sm",weight:"medium",color:"primary",children:l.model_name})]}),r("div",{className:"flex items-center gap-2",children:[e(F,{className:"h-4 w-4 flex-shrink-0",style:{color:s.colors.graphite[400]}}),e(a,{size:"sm",color:"secondary",children:"Version:"}),e(a,{size:"sm",weight:"medium",color:"primary",children:l.prompt_version})]})]}),r("div",{className:"space-y-3",children:[r("div",{className:"flex items-center gap-2",children:[e(k,{className:"h-4 w-4 flex-shrink-0",style:{color:s.colors.graphite[400]}}),e(a,{size:"sm",color:"secondary",children:"Timestamp:"}),e(a,{size:"sm",weight:"medium",color:"primary",children:N(l.timestamp)})]}),r("div",{className:"flex items-center gap-2",children:[e(z,{className:"h-4 w-4 flex-shrink-0",style:{color:s.colors.graphite[400]}}),e(a,{size:"sm",color:"secondary",children:"Temperature:"}),e(a,{size:"sm",weight:"medium",color:"primary",children:l.temperature})]}),r("div",{className:"flex items-center gap-2",children:[e(S,{className:"h-4 w-4 flex-shrink-0",style:{color:s.colors.graphite[400]}}),e(a,{size:"sm",color:"secondary",children:"Context Length:"}),e(a,{size:"sm",weight:"medium",color:"primary",children:l.context_length})]})]})]})]}),c.changes_detected.length>0&&r("div",{className:"p-6",style:{borderBottom:`1px solid ${s.colors.graphite[200]}`},children:[e(p,{level:3,className:"text-graphite-900 mb-4",children:"Changes Detected"}),e("div",{className:"space-y-2",children:c.changes_detected.map((o,i)=>r("div",{className:"flex items-center gap-3 p-3 rounded-lg",style:{backgroundColor:s.colors.data.primary[0]+"10"},children:[H(o),e(a,{size:"sm",color:"primary",children:o})]},i))})]}),r("div",{className:"p-6 space-y-4",children:[e(d,{title:"Prompt Content",section:"prompt",children:r("div",{className:"space-y-4",children:[r("div",{children:[e(a,{weight:"medium",color:"primary",className:"mb-2",children:"Prompt Text"}),e("div",{className:"rounded-md p-4",style:{backgroundColor:s.colors.graphite[50]},children:e(u,{className:"text-sm whitespace-pre-wrap",children:l.prompt_text})})]}),r("div",{children:[e(a,{weight:"medium",color:"primary",className:"mb-2",children:"Prompt Hash"}),e(u,{className:"px-2 py-1 rounded text-sm",style:{backgroundColor:s.colors.data.primary[0]+"20",color:s.colors.data.primary[0]},children:l.prompt_hash})]})]})}),e(d,{title:"Response Content",section:"response",children:r("div",{className:"space-y-4",children:[r("div",{children:[e(a,{weight:"medium",color:"primary",className:"mb-2",children:"Response Text"}),e("div",{className:"rounded-md p-4 max-h-96 overflow-y-auto",style:{backgroundColor:s.colors.graphite[50]},children:e(u,{className:"text-sm whitespace-pre-wrap",children:l.response_text||"No response generated"})})]}),l.response_tokens&&r("div",{className:"grid grid-cols-2 gap-4",children:[r("div",{children:[e(a,{weight:"medium",color:"primary",className:"mb-1",children:"Response Tokens"}),e(a,{size:"sm",color:"secondary",children:l.response_tokens.toLocaleString()})]}),r("div",{children:[e(a,{weight:"medium",color:"primary",className:"mb-1",children:"Tokens per Second"}),e(a,{size:"sm",color:"secondary",children:((_=l.tokens_per_second)==null?void 0:_.toFixed(1))||"N/A"})]})]})]})}),e(d,{title:"Model Parameters",section:"parameters",children:e("div",{className:"rounded-md p-4",style:{backgroundColor:s.colors.graphite[50]},children:e(u,{className:"text-sm",children:JSON.stringify(l.model_parameters,null,2)})})}),e(d,{title:"Environment & Context",section:"environment",children:r("div",{className:"space-y-4",children:[r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment Variables"}),e("div",{className:"bg-gray-50 rounded-md p-4",children:e("pre",{className:"text-sm text-gray-800",children:JSON.stringify(l.environment,null,2)})})]}),l.git_commit&&r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Git Commit"}),e("code",{className:"text-sm text-blue-600 bg-blue-50 px-2 py-1 rounded",children:l.git_commit})]})]})})]}),c.similar_executions.length>0&&r("div",{className:"p-6 border-t border-gray-200",children:[e("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Similar Executions"}),e("div",{className:"space-y-2",children:c.similar_executions.map((o,i)=>{var m;return r("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r("div",{className:"flex items-center space-x-4",children:[r("code",{className:"text-sm text-gray-600",children:[(m=o.execution_id)==null?void 0:m.substring(0,12),"..."]}),e("span",{className:"text-sm text-gray-600",children:o.prompt_version}),e("span",{className:"text-sm text-gray-600",children:o.timestamp&&N(o.timestamp)})]}),r("div",{className:"flex items-center space-x-4 text-sm",children:[e("span",{className:"text-gray-600",children:x(o.execution_time_ms||0)}),r("span",{className:"text-gray-600",children:[o.response_length||0," chars"]}),o.response_quality_score&&e("span",{className:"text-gray-600",children:o.response_quality_score.toFixed(3)})]})]},i)})})]}),l.error_occurred&&r("div",{className:"p-6",style:{borderTop:`1px solid ${s.colors.graphite[200]}`,backgroundColor:s.colors.error[50]},children:[e(p,{level:3,className:"mb-4",style:{color:s.colors.error[900]},children:"Error Information"}),r("div",{className:"space-y-3",children:[r("div",{children:[e(a,{weight:"medium",className:"mb-2",style:{color:s.colors.error[800]},children:"Error Type"}),e(w,{variant:"error",children:l.error_type})]}),r("div",{children:[e(a,{weight:"medium",className:"mb-2",style:{color:s.colors.error[800]},children:"Error Message"}),e("div",{className:"rounded-md p-4",style:{backgroundColor:s.colors.error[100]},children:e(a,{size:"sm",style:{color:s.colors.error[800]},children:l.error_message})})]})]})]})]})};try{T.displayName="ExecutionDetailView",T.__docgenInfo={description:`Detailed execution view with before/after comparison
Based on PromptDashboard.get_before_after_comparison() and get_detailed_execution()`,displayName:"ExecutionDetailView",props:{comparison:{defaultValue:null,description:"",name:"comparison",required:!0,type:{name:"ExecutionComparison"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}}}}}catch{}export{T as E,L as S};
